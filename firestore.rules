rules_version = '2';

/**
 * Firestore Security Rules for ForgeERP
 *
 * Deploy these rules to your Firebase project:
 *   firebase deploy --only firestore:rules
 *
 * Or paste them into the Firebase Console:
 *   https://console.firebase.google.com/project/arnout-s-homelab/firestore/rules
 */
service cloud.firestore {
  match /databases/{database}/documents {

    // Default: deny all access
    match /{document=**} {
      allow read, write: if false;
    }

    // Lab inventory collection â€” shared inventory state
    match /lab-inventory/{docId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null;
    }

    // Per-user app data
    match /users/{userId}/app_data/{key} {
      allow read, write: if request.auth != null
        && request.auth.uid == userId;
    }
  }
}
